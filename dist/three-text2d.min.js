!function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var e;e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,e.THREE_Text=t()}}(function(){return function t(e,i,n){function o(s,a){if(!i[s]){if(!e[s]){var l="function"==typeof require&&require;if(!a&&l)return l(s,!0);if(r)return r(s,!0);var h=new Error("Cannot find module '"+s+"'");throw h.code="MODULE_NOT_FOUND",h}var f=i[s]={exports:{}};e[s][0].call(f.exports,function(t){var i=e[s][1][t];return o(i?i:t)},f,f.exports,t,e,i,n)}return i[s].exports}for(var r="function"==typeof require&&require,s=0;s<n.length;s++)o(n[s]);return o}({1:[function(t,e,i){(function(t){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t){var e=s[t];if(!e){var i=document.getElementsByTagName("body")[0],n=document.createElement("div"),o=document.createTextNode("MÃ‰q");n.appendChild(o),n.setAttribute("style","font:"+t+";position:absolute;top:0;left:0"),i.appendChild(n),e=n.offsetHeight,s[t]=e,i.removeChild(n)}return e}var o=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),r="undefined"!=typeof window?window.THREE:"undefined"!=typeof t?t.THREE:null,s={},a=function(){function t(){i(this,t),this.textWidth=null,this.textHeight=null,this.canvas=document.createElement("canvas"),this.ctx=this.canvas.getContext("2d")}return o(t,[{key:"drawText",value:function(t,e){var i=t.split(/\r\n|\r|\n/),o=i.length;this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height),this.ctx.font=e.font;var s=!0,a=!1,l=void 0;try{for(var h,f=i[Symbol.iterator]();!(s=(h=f.next()).done);s=!0){var u=h.value;this.textWidth=Math.max(this.textWidth,Math.ceil(this.ctx.measureText(u).width))}}catch(t){a=!0,l=t}finally{try{!s&&f.return&&f.return()}finally{if(a)throw l}}this.textHeight=n(this.ctx.font),this.canvas.width=r.Math.nextPowerOfTwo(this.textWidth+2*e.paddingX),this.canvas.height=r.Math.nextPowerOfTwo(this.textHeight*o),e.backgroundColor&&(this.ctx.fillStyle=e.backgroundColor,this.ctx.fillRect(0,0,this.textWidth+2*e.paddingX,this.textHeight*o)),this.ctx.font=e.font,this.ctx.fillStyle=e.fillStyle,this.ctx.textAlign="left",this.ctx.textBaseline="top";var c=0,d=!0,p=!1,y=void 0;try{for(var x,g=i[Symbol.iterator]();!(d=(x=g.next()).done);d=!0){var v=x.value;this.ctx.fillText(v,e.paddingX,c),c+=this.textHeight}}catch(t){p=!0,y=t}finally{try{!d&&g.return&&g.return()}finally{if(p)throw y}}return this.canvas}},{key:"width",get:function(){return this.canvas.width}},{key:"height",get:function(){return this.canvas.height}}]),t}();e.exports=a}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],2:[function(t,e,i){(function(i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},a=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),l="undefined"!=typeof window?window.THREE:"undefined"!=typeof i?i.THREE:null,h=t("./textAlign"),f=t("./CanvasText"),u=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};n(this,e);var r=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return r._font=i.font||"30px Arial",r._fillStyle=i.fillStyle||"#FFFFFF",r._backgroundColor=i.backgroundColor||null,r._paddingX=i.paddingX||null,r.canvas=new f,r.align=i.align||h.center,r.antialias=!!s("undefined"===i.antialias)||i.antialias,r.text=t,r}return r(e,t),a(e,[{key:"raycast",value:function(){return this.sprite.raycast.apply(this.sprite,arguments)}},{key:"updateText",value:function(){this.canvas.drawText(this._text,{font:this._font,fillStyle:this._fillStyle,backgroundColor:this._backgroundColor,paddingX:this._paddingX}),this.cleanUp(),this.texture=new l.Texture(this.canvas.canvas),this.texture.needsUpdate=!0,this.applyAntiAlias(),this.material?this.material.map=this.texture:this.material=new l.SpriteMaterial({map:this.texture}),this.sprite||(this.sprite=new l.Sprite(this.material),this.geometry=this.sprite.geometry,this.add(this.sprite)),this.sprite.scale.set(this.canvas.width,this.canvas.height,1),this.sprite.position.x=this.canvas.width/2-this.canvas.textWidth/2+this.canvas.textWidth/2*this.align.x,this.sprite.position.y=-this.canvas.height/2+this.canvas.textHeight/2*this.align.y}},{key:"cleanUp",value:function(){this.texture&&this.texture.dispose()}},{key:"applyAntiAlias",value:function(){this.antialias===!1&&(this.texture.magFilter=l.NearestFilter,this.texture.minFilter=l.LinearMipMapLinearFilter)}},{key:"width",get:function(){return this.canvas.textWidth}},{key:"height",get:function(){return this.canvas.textHeight}},{key:"text",get:function(){return this._text},set:function(t){this._text!==t&&(this._text=t,this.updateText())}},{key:"font",get:function(){return this._font},set:function(t){this._font!==t&&(this._font=t,this.updateText())}},{key:"fillStyle",get:function(){return this._fillStyle},set:function(t){this._fillStyle!==t&&(this._fillStyle=t,this.updateText())}}]),e}(l.Object3D);e.exports=u}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./CanvasText":1,"./textAlign":4}],3:[function(t,e,i){(function(i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},a=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),l="undefined"!=typeof window?window.THREE:"undefined"!=typeof i?i.THREE:null,h=t("./textAlign"),f=t("./CanvasText"),u=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};n(this,e);var r=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return r._font=i.font||"30px Arial",r._fillStyle=i.fillStyle||"#FFFFFF",r._paddingX=i.paddingX||0,r._paddingY=i.paddingX||0,r.canvas=new f,r.align=i.align||h.center,r.side=i.side||l.DoubleSide,r.antialias=!!s("undefined"===i.antialias)||i.antialias,r.text=t,r}return r(e,t),a(e,[{key:"raycast",value:function(){return this.mesh.raycast.apply(this.mesh,arguments)}},{key:"updateText",value:function(){this.cleanUp(),this.canvas.drawText(this._text,{font:this._font,fillStyle:this._fillStyle,paddingX:this._paddingX,paddingY:this._paddingY}),this.texture=new l.Texture(this.canvas.canvas),this.texture.needsUpdate=!0,this.applyAntiAlias(),this.material?this.material.map=this.texture:(this.material=new l.MeshBasicMaterial({map:this.texture,side:this.side}),this.material.transparent=!0),this.mesh||(this.mesh=new l.Mesh(new l.PlaneGeometry(this.canvas.width,this.canvas.height),this.material),this.geometry=this.mesh.geometry,this.add(this.mesh)),this.mesh.position.x=this.canvas.width/2-this.canvas.textWidth/2+this.canvas.textWidth/2*this.align.x,this.mesh.position.y=-this.canvas.height/2+this.canvas.textHeight/2*this.align.y,this.geometry.vertices[0].x=this.geometry.vertices[2].x=-this.canvas.width/2,this.geometry.vertices[1].x=this.geometry.vertices[3].x=this.canvas.width/2,this.geometry.vertices[0].y=this.geometry.vertices[1].y=this.canvas.height/2,this.geometry.vertices[2].y=this.geometry.vertices[3].y=-this.canvas.height/2,this.geometry.verticesNeedUpdate=!0}},{key:"cleanUp",value:function(){this.texture&&this.texture.dispose()}},{key:"applyAntiAlias",value:function(){this.antialias===!1&&(this.texture.magFilter=l.NearestFilter,this.texture.minFilter=l.LinearMipMapLinearFilter)}},{key:"width",get:function(){return this.canvas.textWidth}},{key:"height",get:function(){return this.canvas.textHeight}},{key:"text",get:function(){return this._text},set:function(t){this._text!==t&&(this._text=t,this.updateText())}},{key:"font",get:function(){return this._font},set:function(t){this._font!==t&&(this._font=t,this.updateText())}},{key:"fillStyle",get:function(){return this._fillStyle},set:function(t){this._fillStyle!==t&&(this._fillStyle=t,this.updateText())}}]),e}(l.Object3D);e.exports=u}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./CanvasText":1,"./textAlign":4}],4:[function(t,e,i){(function(t){"use strict";var i="undefined"!=typeof window?window.THREE:"undefined"!=typeof t?t.THREE:null;e.exports={center:new i.Vector2(0,0),left:new i.Vector2(1,0),topLeft:new i.Vector2(1,-1),topRight:new i.Vector2(-1,-1),right:new i.Vector2(-1,0),bottomLeft:new i.Vector2(1,1),bottomRight:new i.Vector2(-1,1)}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],5:[function(t,e,i){"use strict";e.exports.SpriteText2D=t("./SpriteText2D"),e.exports.Text2D=t("./Text2D"),e.exports.textAlign=t("./textAlign")},{"./SpriteText2D":2,"./Text2D":3,"./textAlign":4}]},{},[5])(5)});